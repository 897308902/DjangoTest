{% extends 'blog/base.html' %}
{% load static %}
{% block title %}主页{% endblock %}
{% block css %}
    <link rel="stylesheet" href="{% static 'css/index.css' %}">
    <script type="text/javascript" src="{% static 'js/index.js' %}"></script>
{% endblock %}
{% block content %}


    <div class="container">

        <form action="{% url 'blog:indexsearch' %}" method="get" >
            <div class="row ">

                <div class="col-md-1 col-sm-1.5 pull-right">
                    <input type="submit" class="btn btn-primary  btn-group-sm" value="查询">
                </div>
                <div class="col-md-3 col-sm-4 has-success pull-right" style="padding: 0;">
                    <input type="text" class="form-control" name="title" placeholder="输入要搜索的博客标题" maxlength="50">
                </div>
            </div>

        </form>

        <br>
    {% if blogs %}
        <ul class="feedlist_id">
            {% for blog in blogs %}

                <li>
                    <h2><a target="_blank" href="{% url 'blog:blog_page' blog.id %}">{{ blog.title }}</a></h2>
                    <div class="oneline summary">
                        {{ blog.content }}
                    </div>
                    <div class="userbar">
                        <div class="fl">
                            <a class="name" href="{% url 'center:usercenter' blog.uname %}">{{ blog.uname }}</a>
                            <span class="little"></span>
                            <a class="time">{{ blog.utime |date:"Y-m-d H:i:s"}}</a>
                            <span class="little"></span>
                            <a class="marks" href="{% url 'blog:marks' blog.marks %}">{{ blog.marks }}</a>
                        </div>
                        <div class="fr">
                            <a href="#"><span>{{ blog.rcount }}</span> 阅读</a>
                            <span class="little"></span>
                            <a href="#"><span>{{ blog.coms }}</span>评论</a>
                        </div>

                    </div>

                </li>
            {% endfor %}
        </ul>
        {#    分页#}
        <ul class="pagination" id="pager">
            <li class="previous"><a href="/blog/?page=1">首页</a></li>
            {#上一页按钮开始#}
            {# 如果当前页有上一页#}
            {% if blogs.has_previous %}
                {#  当前页的上一页按钮正常使用#}
                <li class="previous"><a href="/blog/?page={{ blogs.previous_page_number }}">上一页</a></li>
            {% else %}
                {# 当前页的不存在上一页时,上一页的按钮不可用#}
                <li class="previous disabled"><a href="javascript:void(0);">上一页</a>

                </li>
            {% endif %}
            {#上一页按钮结束#}
            {# 页码开始#}
            {#        {% for num in paginator.page_range %}#}
            {##}
            {#            {% if num == currentPage %}#}
            {#                <li class="item active"><a href="/blog/?page={{ num }}">{{ num }}</a></li>#}
            {##}
            {#            {% else %}#}
            {#                    <li class="item"><a href="/blog/?page={{ num }}">{{ num }}</a></li>#}
            {#                #}
            {#            {% endif %}#}
            {#        {% endfor %}#}
            {#页码结束#}
            <li>

                <input type="text" id="gotoPage" class="form-control pull-left" placeholder="{{ currentPage }}"  onkeyup="this.value=this.value.replace(/\D/g,'')"
                       style="width: 80px; display: inline-block;text-align: center;">
                <a id="pageBtn" class="btn btn-default" href="" style="margin-left: 0;">GO</a>

            </li>
            {# 下一页按钮开始#}
            {% if blogs.has_next %}
                <li class="next"><a href="/blog/?page={{ blogs.next_page_number }}">下一页</a></li>
            {% else %}
                <li class="next disabled"><a href="javascript:void(0);">下一页</a></li>
            {% endif %}
            {# 下一页按钮结束#}
            <li class="previous"><a href="/blog/?page={{ paginator.num_pages }}">尾页</a></li>
            <li class="counts"> 共{{ paginator.num_pages }}页，当前第{{ currentPage }}页</li>

        </ul>

        {% else %}
            {#没有博客，或者搜索博客为空时显示#}
            <div style="height: 300px;text-align: center;padding-top: 200px;">没有找到相关的博客，修改关键字再找找吧！
                <br>
                <a href="{% url 'edit_blog' 0 %}">我来写写吧</a></div>
        {% endif %}
        {#<div style="float: right;width: 200px;height: 500px;background-color: black;position: absolute;top: 50px;right: 20px;">要显示在右侧</div>#}
    </div>


{% endblock %}